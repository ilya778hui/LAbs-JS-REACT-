# Анализ Legacy-Кода

## Legacy-Паттерны и Антипаттерны
1. **Использование var**: Все переменные объявлены с var, что приводит к hoisting и потенциальным ошибкам (строки 4, 5, 37, 38, и в функциях).
2. **Глобальная область видимости**: Весь код в глобальном скопе, что загрязняет namespace и может вызывать конфликты (нет модулей).
3. **Конструкторные функции**: Product и Cart определены как функции-конструкторы с prototype для методов (строки 7-31), вместо классов.
4. **Публичные свойства**: Все свойства (id, name, price, items) публичные, нет инкапсуляции.
5. **For-цикл с var i**: Классический for-цикл с var (строка 21), можно заменить на let или forEach.
6. **Конкатенация строк**: В formatPrice и console.log (строки 34, 40), вместо шаблонных строк.
7. **Отсутствие стрелочных функций**: Методы на prototype определены как обычные функции, где стрелочные могли бы быть уместны.
8. **Антипаттерн глобальных переменных**: taxRate и currency глобальные, лучше в конфиге.

Этот код типичен для pre-ES6, но не масштабируем и не безопасен.